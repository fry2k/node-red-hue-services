<script type="text/html" data-template-name="BridgeConfigNode">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <div style="display: inline-flex; width: calc(100% - 105px)">
            <input type="text" id="node-config-input-name" placeholder="MyBridge" style="width: 100%">
        </div>
    </div>
    <div class="form-row">
        <label for="node-config-input-ip"><i class="fa fa-server"></i> Bridge IP</label>
        <div style="display: inline-flex; width: calc(100% - 105px)">
            <input type="text" id="node-config-input-ip" placeholder="X.X.X.X[:PORT]" style="width: 100%"/>
       </div>
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="fa fa-tag"></i> Key</label>
        <div style="display: inline-flex; width: calc(100% - 105px)">
            <input type="text" id="node-config-input-key" placeholder="MyKey" style="width: 100%">
        </div>
    </div>
</script>

<script type="text/html" data-help-name="BridgeConfigNode">
    <p>A simple node that converts the message payloads into all lower-case characters</p>
</script>

<script type="module">

    RED.nodes.registerType('BridgeConfigNode',{
            category: 'config',
            defaults: {
                name: {value:""},
                ip:   {value:"",required:true},
                key:  {value:"",required:true}
            },
            label: function() {
                return this.name||this.key + "@" + this.ip;
            }
        });

    import { DeviceUI }           from "./src/ui/DeviceUI.js";
    import { DimmerSwitchUI }     from "./src/ui/DimmerSwitchUI.js";
    import { LightUI }            from "./src/ui/LightUI.js";
    import { LutronAuroraUI }     from "./src/ui/LutronAuroraUI.js";
    import { MotionSensorUI }     from "./src/ui/MotionSensorUI.js";
    import { WallSwitchModuleUI } from "./src/ui/WallSwitchModuleUI.js";

    import { SceneUI }            from "./src/ui/SceneUI.js";
    import { RoomUI }             from "./src/ui/RoomUI.js";
    import { ZoneUI }             from "./src/ui/ZoneUI.js";

    import { MotionBehaviorUI }     from "./src/ui/MotionBehaviorUI.js";

    var nodes = {
        "DeviceNode": DeviceUI,
        "DimmerSwitchNode": DimmerSwitchUI,
        "LightNode": LightUI,
        "LutronAuroraNode": LutronAuroraUI,
        "MotionSensorNode": MotionSensorUI,
        "WallSwitchModuleNode": WallSwitchModuleUI,

        "SceneNode": SceneUI,
        "RoomNode": RoomUI,
        "ZoneNode": ZoneUI,

        "MotionBehaviorNode": MotionBehaviorUI,
    }

    Object.keys(nodes).forEach((id) => {
        console.log(id,new nodes[id]().config);
        var idUI = id.replace("Node","UI");

        var template = document.createElement("script");
        template.setAttribute("type","text/html");
        template.setAttribute("data-template-name",id);
        template.innerHTML='<div id="'+idUI+'"></div>';
        document.documentElement.appendChild(template);

        var help = document.createElement("script");
        help.setAttribute("type","text/html");
        help.setAttribute("data-help-name",id);
        document.documentElement.appendChild(template);

        RED.nodes.registerType(id, new nodes[id]().config);
    });

</script>
